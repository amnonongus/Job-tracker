{% extends 'base.html' %}

{% block content %}

{% if user %}
    
    {% if object %}
        
        {% if user.id == job.user_id %}

            <h1>Edit <span class="teal-text">{{ job.title }} at {{ job.company }}</span></h1>
            <form class="form-contact" action="" method="POST">
                {% csrf_token %} 
                {% for field in form %}
                    {% if field.name == 'date_applied' %}
                        <fieldset class="form-group">
                            <label class="control-label" for="id_{{ field.name }}">{{ field.label }}</label>
                            <div class="form-control">
                                <input type="date" class="form-control"
                                    name="{{ field.name }}"
                                    id="id_{{ field.name }}"
                                    {% if field.value != None %}
                                        value="{{ field.value|date:'Y-m-d' }}" 
                                    {% else %}
                                        value=""
                                    {% endif %}
                                    > 
                            </div>
                        </fieldset>
                    {% elif field.name == 'company' %}
                        <fieldset class="form-group">
                            <label class="control-label" for="id_{{ field.name }}">{{ field.label }}</label>
                            <div class="form-control">
                                <input maxlength="100" type="text" class="form-control"
                                    name="{{ field.name }}"
                                    id="id_{{ field.name }}"
                                    {% if field.value != None %}
                                        value="{{ field.value }}" 
                                    {% else %}
                                        value=""
                                    {% endif %}
                                    > 
                                <small class="text-muted">Do not include special characters (apostrophes, dashes, etc.)</small>
                            </div>
                        </fieldset>
                    {% elif field.name == 'description' or field.name == 'tech_reqs' %}
                        <fieldset class="form-group">
                            <label class="control-label" for="id_{{ field.name }}">{{ field.label }}</label>
                            <div class="form-control">
                                <textarea maxlength="500" rows="3" class="form-control"
                                    name="{{ field.name }}"
                                    id="id_{{ field.name }}"
                                    {% if field.value != None %}
                                        >{{ field.value }}</textarea> 
                                    {% else %}
                                        ></textarea> 
                                    {% endif %}
                            </div>
                        </fieldset>
                    {% elif field.name == 'status' %}
                        <fieldset class="form-group">
                            <label class="control-label" for="id_{{ field.name }}">{{ field.label }}</label>
                                <div class="form-control">
                                <select class="form-select">
                                
                                    {% for choice in job.status %}
                                        <option value="{{ choice }}">{{ choice }}</option>
                                    {% endfor %}
                                        
                                </select>
                                </div>
                        </fieldset>
                    {% else %}
                        <fieldset class="form-group">
                            <label class="control-label" for="id_{{ field.name }}">{{ field.label }}</label>
                            <div class="form-control">
                                <input maxlength="100" type="text" class="form-control"
                                    name="{{ field.name }}"
                                    id="id_{{ field.name }}"
                                    {% if field.value != None %}
                                        value="{{ field.value }}" 
                                    {% else %}
                                        value=""
                                    {% endif %}
                                    > 
                            </div>
                        </fieldset>
                    {% endif %}
                {% endfor %}
                   <input type="submit" value="Submit"  class="btn job-btn submit-btn">
            </form>

        {% else %}

            <h1>You do not have access to this page ðŸ˜¡</h1>
     
        {% endif %}
        
    {% else %}
        
        <h1>Add Job</h1>
        <form class="form-contact" action="" method="POST">
            {% csrf_token %} 
            {% for field in form %}
                {% if field.name == 'date_applied' %}
                    <fieldset class="form-group">
                        <label class="control-label" for="id_{{ field.name }}">{{ field.label }}</label>
                        <div class="form-control">
                            <input type="date" class="form-control"
                                name="{{ field.name }}"
                                id="id_{{ field.name }}"
                                {% if field.value != None %}
                                    value="{{ field.value|date:'Y-m-d' }}" 
                                {% else %}
                                    value=""
                                {% endif %}
                                > 
                        </div>
                    </fieldset>
                {% elif field.name == 'company' %}
                    <fieldset class="form-group">
                        <label class="control-label" for="id_{{ field.name }}">{{ field.label }}</label>
                        <div class="form-control">
                            <input maxlength="100" type="text" class="form-control"
                                name="{{ field.name }}"
                                id="id_{{ field.name }}"
                                {% if field.value != None %}
                                    value="{{ field.value }}" 
                                {% else %}
                                    value=""
                                {% endif %}
                                > 
                            <small class="text-muted">Do not include special characters (apostrophes, dashes, etc.)</small>
                        </div>
                    </fieldset>
                {% elif field.name == 'description' or field.name == 'tech_reqs' %}
                    <fieldset class="form-group">
                        <label class="control-label" for="id_{{ field.name }}">{{ field.label }}</label>
                        <div class="form-control">
                            <textarea maxlength="500" rows="3" class="form-control"
                                name="{{ field.name }}"
                                id="id_{{ field.name }}"
                                {% if field.value != None %}
                                    >{{ field.value }}</textarea> 
                                {% else %}
                                    ></textarea> 
                                {% endif %}
                        </div>
                    </fieldset>
                {% else %}
                    <fieldset class="form-group">
                        <label class="control-label" for="id_{{ field.name }}">{{ field.label }}</label>
                        <div class="form-control">
                            <input maxlength="100" type="text" class="form-control"
                                name="{{ field.name }}"
                                id="id_{{ field.name }}"
                                {% if field.value != None %}
                                    value="{{ field.value }}" 
                                {% else %}
                                    value=""
                                {% endif %}
                                > 
                        </div>
                    </fieldset>
                {% endif %}
            {% endfor %}
               <input type="submit" value="Submit"  class="btn job-btn submit-btn">
        </form>
        
    {% endif %}

{% else %}

    <h1>You do not have access to this page ðŸ˜¡</h1>    
    
{% endif %}

    
{% endblock content %}
    